<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>

<BorderPane xmlns:fx="http://javafx.com/fxml"
            fx:controller="es.tfg.residencias.ui.admin.residentes.PanelResidenteActualControlador">
    <top>
        <Label fx:id="lblTitulo" text="Detalle residente" style="-fx-font-size: 16; -fx-padding: 10;"/>
    </top>
    <center>
        <TabPane>
            <tabs>
                <Tab text="Habitación">
                <content>
                    <GridPane hgap="8" vgap="8" style="-fx-padding: 12;">
                        <children>
                            <Label text="Número:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                            <Label fx:id="lblHabNumero" text="—" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                            <Label text="Planta:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                            <Label fx:id="lblHabPlanta" text="—" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                            <Label text="Desde:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                            <Label fx:id="lblHabDesde" text="—" GridPane.rowIndex="2" GridPane.columnIndex="1"/>

                            <Label text="Notas:" GridPane.rowIndex="3" GridPane.columnIndex="0"/>
                            <Label fx:id="lblHabNotas" text="—" wrapText="true" GridPane.rowIndex="3" GridPane.columnIndex="1"/>

                            <Button text="Cambiar habitación" onAction="#cambiarHabitacion" GridPane.rowIndex="4" GridPane.columnIndex="1"/>
                            <Separator GridPane.rowIndex="6" GridPane.columnSpan="2" />
                            <TableView fx:id="tablaHistHab" GridPane.rowIndex="5" GridPane.columnSpan="2" prefHeight="220">
                            <columns>
                                <TableColumn fx:id="colHistNumero" text="Nº" prefWidth="90"/>
                                <TableColumn fx:id="colHistPlanta" text="Planta" prefWidth="90"/>
                                <TableColumn fx:id="colHistDesde"  text="Desde" prefWidth="120"/>
                                <TableColumn fx:id="colHistHasta"  text="Hasta" prefWidth="120"/>
                                <TableColumn fx:id="colHistNotas"  text="Notas" prefWidth="300"/>
                            </columns>
                            </TableView>
                        </children>
                    </GridPane>
                </content>
                </Tab>
                <Tab text="Medicación–Prescripción">
                    <content>
                        <VBox spacing="8" style="-fx-padding: 12;">
                        <ToolBar>
                            <items>
                            <Button text="Añadir prescripción" onAction="#anadirPrescripcion"/>
                            <Button text="Finalizar prescripción" onAction="#finalizarPrescripcion"/>
                            <!-- (más adelante: Editar, Finalizar) -->
                            </items>
                        </ToolBar>

                        <TableView fx:id="tablaPresc" prefHeight="300">
                            <columns>
                            <TableColumn fx:id="colPrescMed"    text="Medicamento" prefWidth="160"/>
                            <TableColumn fx:id="colPrescForma"  text="Forma"       prefWidth="110"/>
                            <TableColumn fx:id="colPrescFuerza" text="Fuerza"      prefWidth="110"/>
                            <TableColumn fx:id="colPrescDosis"  text="Dosis"       prefWidth="110"/>
                            <TableColumn fx:id="colPrescFreq"   text="Frecuencia"  prefWidth="130"/>
                            <TableColumn fx:id="colPrescVia"    text="Vía"         prefWidth="90"/>
                            <TableColumn fx:id="colPrescInicio" text="Inicio"      prefWidth="110"/>
                            <TableColumn fx:id="colPrescFin"    text="Fin"         prefWidth="110"/>
                            <TableColumn fx:id="colPrescNotas"  text="Notas"       prefWidth="220"/>
                            </columns>
                        </TableView>

                        <Label text="Mostrando prescripciones activas."/>
                        </VBox>
                    </content>
                </Tab>
                <Tab text="Dieta">
                    <content>
                        <VBox spacing="12" xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml">
                        <GridPane hgap="10" vgap="10">
                            <columnConstraints>
                            <ColumnConstraints halignment="RIGHT" minWidth="120"/>
                            <ColumnConstraints hgrow="ALWAYS"/>
                            </columnConstraints>

                            <children>
                            <Label text="Dieta actual:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                            <Label fx:id="lblDietaActual" text="—" GridPane.rowIndex="0" GridPane.columnIndex="1"/>

                            <Label text="Desde:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                            <Label fx:id="lblDietaDesde" text="—" GridPane.rowIndex="1" GridPane.columnIndex="1"/>

                            <Label text="Notas:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                            <Label fx:id="lblDietaNotas" text="—" wrapText="true" GridPane.rowIndex="2" GridPane.columnIndex="1"/>
                            </children>
                        </GridPane>

                        <HBox spacing="10">
                            <Button text="Cambiar dieta…" onAction="#cambiarDieta"/>
                        </HBox>
                        </VBox>
                        <VBox spacing="12" xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml">
                            <!-- ... tus GridPane con labels ... -->

                            <HBox spacing="10">
                                <Button text="Cambiar dieta…" onAction="#cambiarDieta"/>
                            </HBox>

                            <!-- Histórico -->
                            <Label text="Histórico de dietas" style="-fx-font-weight: bold;"/>
                            <TableView fx:id="tablaHistDieta" prefHeight="240">
                                <columns>
                                <TableColumn fx:id="colDHNombre" text="Dieta" prefWidth="180"/>
                                <TableColumn fx:id="colDHDesde"  text="Desde" prefWidth="120"/>
                                <TableColumn fx:id="colDHHasta"  text="Hasta" prefWidth="120"/>
                                <TableColumn fx:id="colDHNotas"  text="Notas" prefWidth="300"/>
                                </columns>
                            </TableView>
                        </VBox>
                    </content>
                    </Tab>
                <Tab text="Familia">
                    <content>
                        <VBox spacing="10" xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml">
                        <HBox spacing="8">
                            <Button text="Añadir" onAction="#anadirFamiliar"/>
                            <Button text="Editar"  onAction="#editarFamiliar"/>
                            <Button text="Borrar"  onAction="#borrarFamiliar"/>
                        </HBox>

                        <TableView fx:id="tablaFamilia" prefHeight="260">
                            <columns>
                            <TableColumn fx:id="colFamNombre"     text="Nombre"     prefWidth="180"/>
                            <TableColumn fx:id="colFamUsuario"    text="Usuario"    prefWidth="140"/>
                            <TableColumn fx:id="colFamParentesco" text="Parentesco" prefWidth="140"/>
                            <TableColumn fx:id="colFamEmail"      text="Email"      prefWidth="220"/>
                            </columns>
                        </TableView>
                        </VBox>
                    </content>
                    </Tab>
                    <Tab fx:id="tabTrabajadores" text="Trabajadores" closable="false">
                        <content>
                            <VBox spacing="10" styleClass="section" prefWidth="800">
                            <!-- Barra de acciones -->
                            <HBox spacing="8">
                                <Button fx:id="btnAsignarTrab"  text="Asignar Trabajador"    onAction="#asignarTrabajador"/>
                                <Button fx:id="btnCerrarTrab"   text="Eliminar Asignación"     onAction="#cerrarAsignacionTrab"/>
                                <Region HBox.hgrow="ALWAYS"/>
                                <CheckBox fx:id="chkSoloVigentesTrab" text="Solo vigentes" selected="true"
                                        onAction="#toggleVigentesTrab"/>
                            </HBox>

                            <TableView fx:id="tablaCuidadores" prefHeight="360">
                                <columns>
                                <TableColumn fx:id="colTrabajador" text="Trabajador" prefWidth="220"/>
                                <TableColumn fx:id="colUsuario"    text="Usuario"    prefWidth="160"/>
                                <TableColumn fx:id="colDesde"      text="Desde"      prefWidth="120"/>
                                <TableColumn fx:id="colHasta"      text="Hasta"      prefWidth="120"/>
                                <TableColumn fx:id="colNotas"      text="Notas"      prefWidth="240"/>
                                </columns>
                            </TableView>
                            </VBox>
                        </content>
                        </Tab>
            </tabs>
        </TabPane>
    </center>
</BorderPane>